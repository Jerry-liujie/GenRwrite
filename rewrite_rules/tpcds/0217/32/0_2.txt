Remove the correlated subquery by precomputing the aggregate in a common table expression: Eliminates row-by-row re-evaluation and enhances performance.